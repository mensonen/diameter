
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../node/">
      
      
        <link rel="next" href="../sample_application/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Application basics - Python Diameter Stack</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    

    

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#working-with-diameter-applications" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Python Diameter Stack" class="md-header__button md-logo" aria-label="Python Diameter Stack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Diameter Stack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Application basics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/mensonen/diameter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Python Diameter Stack" class="md-nav__button md-logo" aria-label="Python Diameter Stack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python Diameter Stack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mensonen/diameter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../avp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with AVPs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with messages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connecting to peers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Application basics
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sample_application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sample application
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node_statistics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Statistics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extending_the_stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending and customising
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/credit_control_sms_client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credit Control SMS client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/idle_server_client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Idling server and client
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Refrence
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Refrence
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/avp/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    AVP
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            AVP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/avp/grouped/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grouped AVPs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/aa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/aa_mobile_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AA Mobile Node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/abort_session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Abort Session
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/accounting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accounting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/capabilities_exchange/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Capabilities Exchange
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/credit_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credit Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/device_watchdog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Device Watchdog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/diameter_eap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diameter EAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/disconnect_peer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disconnect Peer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/home_agent_mip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home Agent MIP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/location_info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Location Info
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/multimedia_auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multimedia Auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/push_profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Push Profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/re_auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Re Auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/registration_termination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Registration Termination
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/server_assignment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Server Assignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/session_termination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session Termination
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/spending_limit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spending Limit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/spending_status_notification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spending Status Notification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/user_authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/commands/other_commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Other
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/peer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Peer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/application/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Application
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node utilities
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="working-with-diameter-applications">Working with diameter applications<a class="headerlink" href="#working-with-diameter-applications" title="Permanent link">&para;</a></h1>
<p>A diameter application is the highest level of abstraction provided by the 
<code>diameter</code> package. It automates tasks such as:</p>
<ul>
<li>Synchronous return of answers after sending messages</li>
<li>Tracking requests that require answers</li>
<li>Routing requests to any suitable peers, including load balancing</li>
<li>Constructing answers from received request messages</li>
</ul>
<p>An "application" is any instance of a subclass of 
<a class="autorefs autorefs-internal" title="Application" href="../../api/application/#diameter.node.application.Application"><code>Application</code></a>. An application is 
handed over to a configured node and the node will route every received request
and answer message to the application, when necessary. Protocol-level message
exchanges, i.e. CER (Capabilities-Exchange), DWR (Device-Watchdog) and DPR
(Disconnect-Peer) never reach any application, but every other message is 
expected to be handled by at least one application.</p>
<p>If a node receives a message that no application has been configured to handle,
it will reject the message with a <code>DIAMETER_APPLICATION_UNSUPPORTED</code> error.</p>
<p>An example of the most basic client application:</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="kn">from</span> <span class="nn">diameter.message</span> <span class="kn">import</span> <span class="n">Message</span>
</span><span id="__span-0-2"><span class="kn">from</span> <span class="nn">diameter.message.constants</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-0-3"><span class="kn">from</span> <span class="nn">diameter.node</span> <span class="kn">import</span> <span class="n">Node</span>
</span><span id="__span-0-4"><span class="kn">from</span> <span class="nn">diameter.node.application</span> <span class="kn">import</span> <span class="n">SimpleThreadingApplication</span>
</span><span id="__span-0-5">
</span><span id="__span-0-6"><span class="n">my_app</span> <span class="o">=</span> <span class="n">SimpleThreadingApplication</span><span class="p">(</span><span class="n">APP_DIAMETER_BASE_ACCOUNTING</span><span class="p">,</span> 
</span><span id="__span-0-7">                                    <span class="n">is_acct_application</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-8">
</span><span id="__span-0-9"><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;peername.gy&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">)</span>
</span><span id="__span-0-10"><span class="n">peer</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">add_peer</span><span class="p">(</span><span class="s2">&quot;aaa://ocs2.gy;transport=sctp&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">,</span> 
</span><span id="__span-0-11">                     <span class="n">ip_addresses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;10.16.0.8&quot;</span><span class="p">,</span> <span class="s2">&quot;10.16.5.8&quot;</span><span class="p">],</span> 
</span><span id="__span-0-12">                     <span class="n">is_persistent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-13"><span class="n">node</span><span class="o">.</span><span class="n">add_application</span><span class="p">(</span><span class="n">my_app</span><span class="p">,</span> <span class="p">[</span><span class="n">peer</span><span class="p">])</span>
</span><span id="__span-0-14"><span class="n">node</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-0-15">
</span><span id="__span-0-16"><span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">()</span>
</span><span id="__span-0-17">
</span><span id="__span-0-18"><span class="n">my_app</span><span class="o">.</span><span class="n">wait_for_ready</span><span class="p">()</span>
</span><span id="__span-0-19"><span class="n">answer</span> <span class="o">=</span> <span class="n">my_app</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></code></pre></div>
<p>The <a class="autorefs autorefs-internal" title="add_application" href="../../api/node/#diameter.node.node.Node.add_application"><code>add_application</code></a> call configures 
also the peers that the application will use. More than one application of 
same type can be added at the same time, as long as they use different peers.</p>
<p>The application provides a 
<a class="autorefs autorefs-internal" title="wait_for_ready" href="../../api/application/#diameter.node.application.Application.wait_for_ready"><code>wait_for_ready</code></a> method, 
which will block until at least one of the configured peers becomes available 
to receive requests.</p>
<p>The <a class="autorefs autorefs-internal" title="send_request" href="../../api/application/#diameter.node.application.Application.send_request"><code>send_request</code></a> 
application instance method will block until an answer message has been 
received, and then returns the message, synchronously.</p>
<p>The <code>diameter</code> package offers three different application implementations:</p>
<dl>
<dt><a class="autorefs autorefs-internal" title="Application" href="../../api/application/#diameter.node.application.Application"><code>Application</code></a></dt>
<dd>
<p>The most basic form of an application. Must be subclassed and contains two 
methods, <code>handle_request</code>, which must be overridden, and <code>handle_answer</code>,
which <em>may</em> be overriden, but is usually not necessary. </p>
<p>The <code>Application</code> class calls internally <code>handle_request</code> for each 
received diameter request in the main thread. It calls <code>handle_answer</code> for
each answer that comes unexpected, i.e. without a request waiting for it.</p>
<div class="highlight"><pre><span></span><code><span id="__span-1-1"><span class="kn">from</span> <span class="nn">diameter.message</span> <span class="kn">import</span> <span class="n">Message</span>
</span><span id="__span-1-2"><span class="kn">from</span> <span class="nn">diameter.message.constants</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-1-3"><span class="kn">from</span> <span class="nn">diameter.node</span> <span class="kn">import</span> <span class="n">Node</span>
</span><span id="__span-1-4"><span class="kn">from</span> <span class="nn">diameter.node.application</span> <span class="kn">import</span> <span class="n">Application</span>
</span><span id="__span-1-5">
</span><span id="__span-1-6"><span class="k">class</span> <span class="nc">MyApplication</span><span class="p">(</span><span class="n">Application</span><span class="p">):</span>
</span><span id="__span-1-7">    <span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">):</span>
</span><span id="__span-1-8">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Got request&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span id="__span-1-9">
</span><span id="__span-1-10"><span class="n">my_app</span> <span class="o">=</span> <span class="n">MyApplication</span><span class="p">(</span><span class="n">APP_DIAMETER_BASE_ACCOUNTING</span><span class="p">,</span> 
</span><span id="__span-1-11">                       <span class="n">is_acct_application</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-1-12">
</span><span id="__span-1-13"><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;peername.gy&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">)</span>
</span><span id="__span-1-14"><span class="n">peer</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">add_peer</span><span class="p">(</span><span class="s2">&quot;aaa://ocs2.gy;transport=sctp&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">)</span>
</span><span id="__span-1-15"><span class="n">node</span><span class="o">.</span><span class="n">add_application</span><span class="p">(</span><span class="n">my_app</span><span class="p">,</span> <span class="p">[</span><span class="n">peer</span><span class="p">])</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The request and answer are called in the main <code>Node</code> work thread and 
they will block the node from processing any other messages. When this
class is used, the implementing party is expected to build a queue and/or
threading based solution on top, which would not block the main thread.</p>
</div>
</dd>
<dt><a class="autorefs autorefs-internal" title="ThreadingApplication" href="../../api/application/#diameter.node.application.ThreadingApplication"><code>ThreadingApplication</code></a></dt>
<dd>
<p>A variation of application, which spawns a new thread for each incoming 
request, up to an optional maximum amount of threads. Must be subclassed.
Also contains two methods, <code>handle_request</code>, which must be overridden, 
and <code>handle_answer</code>, which <em>may</em> be overriden, but is usually not necessary.</p>
<p>Unlike in the base <code>Application</code> class, the threading application expects
that the overridden <code>handle_request</code> returns a valid diameter message as an
answer to the received request. Failing to do so results in an automatic 
generation of a <code>DIAMETER_UNABLE_TO_COMPLY</code> error message.</p>
<div class="highlight"><pre><span></span><code><span id="__span-2-1"><span class="kn">from</span> <span class="nn">diameter.message</span> <span class="kn">import</span> <span class="n">Message</span>
</span><span id="__span-2-2"><span class="kn">from</span> <span class="nn">diameter.message.constants</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-2-3"><span class="kn">from</span> <span class="nn">diameter.node</span> <span class="kn">import</span> <span class="n">Node</span>
</span><span id="__span-2-4"><span class="kn">from</span> <span class="nn">diameter.node.application</span> <span class="kn">import</span> <span class="n">ThreadingApplication</span>
</span><span id="__span-2-5">
</span><span id="__span-2-6"><span class="k">class</span> <span class="nc">MyApplication</span><span class="p">(</span><span class="n">ThreadingApplication</span><span class="p">):</span>
</span><span id="__span-2-7">    <span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
</span><span id="__span-2-8">        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Got request&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span id="__span-2-9">        <span class="n">answer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_answer</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="__span-2-10">        <span class="k">return</span> <span class="n">answer</span>
</span><span id="__span-2-11">
</span><span id="__span-2-12"><span class="n">my_app</span> <span class="o">=</span> <span class="n">MyApplication</span><span class="p">(</span><span class="n">APP_DIAMETER_BASE_ACCOUNTING</span><span class="p">,</span> 
</span><span id="__span-2-13">                       <span class="n">is_acct_application</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-2-14">                       <span class="n">max_threads</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-2-15">
</span><span id="__span-2-16"><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;peername.gy&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">)</span>
</span><span id="__span-2-17"><span class="n">peer</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">add_peer</span><span class="p">(</span><span class="s2">&quot;aaa://ocs2.gy;transport=sctp&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">)</span>
</span><span id="__span-2-18"><span class="n">node</span><span class="o">.</span><span class="n">add_application</span><span class="p">(</span><span class="n">my_app</span><span class="p">,</span> <span class="p">[</span><span class="n">peer</span><span class="p">])</span>
</span></code></pre></div>
</dd>
<dt><a class="autorefs autorefs-internal" title="SimpleThreadingApplication" href="../../api/application/#diameter.node.application.SimpleThreadingApplication"><code>SimpleThreadingApplication</code></a></dt>
<dd>
<p>A variation of threading application, which does not need to be subclassed 
and handles incoming requests only optionally. Also spawns a new thread for 
each incoming request, up to an optional maximum amount of threads. </p>
<p>In order to receive requests, the <code>SimpleThreadingApplication</code> accepts a 
callback method in its constructor and calls it in a separate spawned 
thread. Similar to the threading application, the callback function <em>must</em>
return a valid answer, otherwise a <code>DIAMETER_UNABLE_TO_COMPLY</code> error is 
sent back to the network.</p>
<p>If no callback is provided, the <code>SimpleThreadingApplication</code> acts as a 
client only and accepts no incoming requests.</p>
<div class="highlight"><pre><span></span><code><span id="__span-3-1"><span class="kn">from</span> <span class="nn">diameter.message</span> <span class="kn">import</span> <span class="n">Message</span>
</span><span id="__span-3-2"><span class="kn">from</span> <span class="nn">diameter.message.constants</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-3-3"><span class="kn">from</span> <span class="nn">diameter.node</span> <span class="kn">import</span> <span class="n">Node</span>
</span><span id="__span-3-4"><span class="kn">from</span> <span class="nn">diameter.node.application</span> <span class="kn">import</span> <span class="n">SimpleThreadingApplication</span>
</span><span id="__span-3-5">
</span><span id="__span-3-6"><span class="k">def</span> <span class="nf">recv_request</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">SimpleThreadingApplication</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
</span><span id="__span-3-7">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Got request&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="s2">&quot;through application&quot;</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
</span><span id="__span-3-8">    <span class="n">answer</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">generate_answer</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="__span-3-9">    <span class="n">answer</span><span class="o">.</span><span class="n">result_code</span> <span class="o">=</span> <span class="n">E_RESULT_CODE_DIAMETER_SUCCESS</span>
</span><span id="__span-3-10">    <span class="k">return</span> <span class="n">answer</span>
</span><span id="__span-3-11">
</span><span id="__span-3-12"><span class="n">my_app</span> <span class="o">=</span> <span class="n">SimpleThreadingApplication</span><span class="p">(</span><span class="n">APP_DIAMETER_BASE_ACCOUNTING</span><span class="p">,</span> 
</span><span id="__span-3-13">                                    <span class="n">is_acct_application</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-3-14">                                    <span class="n">max_threads</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
</span><span id="__span-3-15">                                    <span class="n">request_handler</span><span class="o">=</span><span class="n">recv_request</span><span class="p">)</span>
</span><span id="__span-3-16">
</span><span id="__span-3-17"><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;peername.gy&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">)</span>
</span><span id="__span-3-18"><span class="n">peer</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">add_peer</span><span class="p">(</span><span class="s2">&quot;aaa://ocs2.gy;transport=sctp&quot;</span><span class="p">,</span> <span class="s2">&quot;realm.net&quot;</span><span class="p">)</span>
</span><span id="__span-3-19"><span class="n">node</span><span class="o">.</span><span class="n">add_application</span><span class="p">(</span><span class="n">my_app</span><span class="p">,</span> <span class="p">[</span><span class="n">peer</span><span class="p">])</span>
</span></code></pre></div>
</dd>
</dl>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "toc.integrate"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>