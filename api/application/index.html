
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../peer/">
      
      
        <link rel="next" href="../utilities/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Application - Python Diameter Stack</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    

    

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#diameter.node.application" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Python Diameter Stack" class="md-header__button md-logo" aria-label="Python Diameter Stack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Diameter Stack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Application
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mensonen/diameter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Python Diameter Stack" class="md-nav__button md-logo" aria-label="Python Diameter Stack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Python Diameter Stack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mensonen/diameter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guide/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/avp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with AVPs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/message/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with messages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to peers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/sample_application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sample application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/node_statistics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Statistics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/credit_control_sms_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credit Control SMS client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/idle_server_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Idling server and client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Refrence
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Refrence
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../avp/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    AVP
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            AVP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../avp/grouped/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grouped AVPs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../message/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/aa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/aa_mobile_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AA Mobile Node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/abort_session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Abort Session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/accounting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accounting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/capabilities_exchange/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Capabilities Exchange
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/credit_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credit Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/device_watchdog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Device Watchdog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/diameter_eap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diameter EAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/disconnect_peer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disconnect Peer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/re_auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Re Auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/session_termination/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Session Termination
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/other_commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../peer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Peer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Application
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Application
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application" class="md-nav__link">
    <span class="md-ellipsis">
      application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.Application" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Application.generate_answer" class="md-nav__link">
    <span class="md-ellipsis">
      generate_answer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Application.handle_answer" class="md-nav__link">
    <span class="md-ellipsis">
      handle_answer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Application.handle_request" class="md-nav__link">
    <span class="md-ellipsis">
      handle_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Application.send_answer" class="md-nav__link">
    <span class="md-ellipsis">
      send_answer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Application.send_request" class="md-nav__link">
    <span class="md-ellipsis">
      send_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Application.wait_for_ready" class="md-nav__link">
    <span class="md-ellipsis">
      wait_for_ready
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.ApplicationError" class="md-nav__link">
    <span class="md-ellipsis">
      ApplicationError
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.EmptyAnswer" class="md-nav__link">
    <span class="md-ellipsis">
      EmptyAnswer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.Message" class="md-nav__link">
    <span class="md-ellipsis">
      Message
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.code" class="md-nav__link">
    <span class="md-ellipsis">
      code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.header" class="md-nav__link">
    <span class="md-ellipsis">
      header
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.append_avp" class="md-nav__link">
    <span class="md-ellipsis">
      append_avp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.as_bytes" class="md-nav__link">
    <span class="md-ellipsis">
      as_bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.find_avps" class="md-nav__link">
    <span class="md-ellipsis">
      find_avps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.from_bytes" class="md-nav__link">
    <span class="md-ellipsis">
      from_bytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.to_answer" class="md-nav__link">
    <span class="md-ellipsis">
      to_answer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Message.type_factory" class="md-nav__link">
    <span class="md-ellipsis">
      type_factory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.Node" class="md-nav__link">
    <span class="md-ellipsis">
      Node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.applications" class="md-nav__link">
    <span class="md-ellipsis">
      applications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.cea_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      cea_timeout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.cer_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      cer_timeout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.connections" class="md-nav__link">
    <span class="md-ellipsis">
      connections
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.dwa_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      dwa_timeout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.end_to_end_seq" class="md-nav__link">
    <span class="md-ellipsis">
      end_to_end_seq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.idle_timeout" class="md-nav__link">
    <span class="md-ellipsis">
      idle_timeout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.peer_sockets" class="md-nav__link">
    <span class="md-ellipsis">
      peer_sockets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.peers" class="md-nav__link">
    <span class="md-ellipsis">
      peers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.peers_logging" class="md-nav__link">
    <span class="md-ellipsis">
      peers_logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.product_name" class="md-nav__link">
    <span class="md-ellipsis">
      product_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.retransmit_queue_size" class="md-nav__link">
    <span class="md-ellipsis">
      retransmit_queue_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.session_generator" class="md-nav__link">
    <span class="md-ellipsis">
      session_generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.socket_peers" class="md-nav__link">
    <span class="md-ellipsis">
      socket_peers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.statistics" class="md-nav__link">
    <span class="md-ellipsis">
      statistics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.statistics_history" class="md-nav__link">
    <span class="md-ellipsis">
      statistics_history
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.stats_logging" class="md-nav__link">
    <span class="md-ellipsis">
      stats_logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.vendor_id" class="md-nav__link">
    <span class="md-ellipsis">
      vendor_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.wakeup_interval" class="md-nav__link">
    <span class="md-ellipsis">
      wakeup_interval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.add_application" class="md-nav__link">
    <span class="md-ellipsis">
      add_application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.add_peer" class="md-nav__link">
    <span class="md-ellipsis">
      add_peer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.close_connection_socket" class="md-nav__link">
    <span class="md-ellipsis">
      close_connection_socket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.remove_peer_connection" class="md-nav__link">
    <span class="md-ellipsis">
      remove_peer_connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.route_answer" class="md-nav__link">
    <span class="md-ellipsis">
      route_answer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.route_request" class="md-nav__link">
    <span class="md-ellipsis">
      route_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.send_message" class="md-nav__link">
    <span class="md-ellipsis">
      send_message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.Node.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.RequestTimeout" class="md-nav__link">
    <span class="md-ellipsis">
      RequestTimeout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.SimpleThreadingApplication" class="md-nav__link">
    <span class="md-ellipsis">
      SimpleThreadingApplication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.StoppableThread" class="md-nav__link">
    <span class="md-ellipsis">
      StoppableThread
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StoppableThread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.StoppableThread.is_stopped" class="md-nav__link">
    <span class="md-ellipsis">
      is_stopped
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.StoppableThread.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diameter.node.application.ThreadingApplication" class="md-nav__link">
    <span class="md-ellipsis">
      ThreadingApplication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ThreadingApplication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diameter.node.application.ThreadingApplication.handle_request" class="md-nav__link">
    <span class="md-ellipsis">
      handle_request
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node utilities
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Application</h1>

<p>API reference for <code>diameter.node.application</code>.</p>


<div class="doc doc-object doc-module">



<a id="diameter.node.application"></a>
    <div class="doc doc-contents first">

      <p>Diameter application implementations.</p>
<p>Instances of Applications, or their subclasses, provided by this module can be
passed directly to an instance of a <code>Node</code>, for receiving and sending diameter
application messages.</p>
<p>In most cases, the most suitable option to use is
<a class="autorefs autorefs-internal" href="#diameter.node.application.SimpleThreadingApplication"><code>SimpleThreadingApplication</code></a>,
which will cover the most scenarios without requiring any unnecessary setup.</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.Application" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Application</span>


<a href="#diameter.node.application.Application" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">Application</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">application_id</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">is_acct_application</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-4">    <span class="n">is_auth_application</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-5"><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">


      <p>A basic diameter application that can be registered with a Node.</p>
<p>Can be used as a starting point for building applications with custom
logic. In most cases, <code>SimpleThreadingApplication</code> and
<code>ThreadingApplication</code> are more practical.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>application_id</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication application ID</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_acct_application</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag the application as an accounting app</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_auth_application</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag the application as an authorisation app</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>




  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Application.generate_answer" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">generate_answer</span>


<a href="#diameter.node.application.Application.generate_answer" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">generate_answer</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">message</span><span class="p">:</span> <span class="n"><span title="diameter.node.application._AnyMessageType">_AnyMessageType</span></span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">result_code</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-4">    <span class="n">error_message</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-5"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="diameter.node.application._AnyAnswerType">_AnyAnswerType</span></span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Produce an answer message from a request message.</p>
<p>Calls <a class="autorefs autorefs-internal" href="../message/#diameter.message.Message.to_answer">Message.to_answer</a> and adds
origin host, origin realm, session id and application IDs automatically.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><span title="diameter.node.application._AnyMessageType">_AnyMessageType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any diameter message with a python implementation,
accepting AVPs as instance attributes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>result_code</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional result code to add to the answer</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>error_message</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional error message to add to the answer</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Application.handle_answer" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">handle_answer</span>


<a href="#diameter.node.application.Application.handle_answer" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">handle_answer</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Called every time an unexpected answer message is received.</p>
<p>Normally, answers are returned directly as the return values of
<code>send_request</code>; overriding this method is not strictly required. It is
called every time an answer is received, with nobody expecting one.
This could happen e.g. when the answer wait timeout has been exceeded.
By default, this method does nothing and only discards every unexpected
message.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is called in the main thread; its execution blocks the
diameter Node from processing any incoming or outgoing messages.
The implementing party is expected to utilise a message queue and
do the work in a separate thread.</p>
</div>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Application.handle_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">handle_request</span>


<a href="#diameter.node.application.Application.handle_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">handle_request</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Called every time a request message is received.</p>
<p>The parent diameter node does not check or expect this method to return
anyhing; the application is expected to send its answer messages back
towards the network by using the <code>send_message</code> method.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is called in the main thread; its execution blocks the
diameter Node from processing any incoming or outgoing messages.
The implementing party is expected to utilise a message queue and
do the work in a separate thread. Alternatively, the
<a class="autorefs autorefs-internal" href="#diameter.node.application.ThreadingApplication">ThreadingApplication</a>
can be used, which spawns a new thread for every request.</p>
</div>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Application.send_answer" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">send_answer</span>


<a href="#diameter.node.application.Application.send_answer" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">send_answer</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Send an answer message.</p>
<p>Routes the message directly to the parent diameter node, where it will
be forwarded through the network to the appropriate peer. The
application ID, hop-by-hop identifier and end-to-end identifiers must
already be set (copied from the original request).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A diameter message to send</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>The method will return nothing; it returns immediately without waiting
for any results from the network.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Application.send_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">send_request</span>


<a href="#diameter.node.application.Application.send_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">send_request</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Send a request message.</p>
<p>Routes the message directly to the parent diameter node, where it will
be forwarded through the network to the appropriate peer. The header
application ID and end-to-end hop identifiers are set automatically,
if not already present.</p>
<p>The hop-by-hop identifier will be set by the node, if the message can
be routed to a peer and if the identifier is not already present.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A diameter message to send</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A timeout in seconds to wait for an answer</p>
              </div>
            </td>
            <td>
                  <code>30</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A diameter answer message, if one was received within the timeout
seconds, otherwise <code>None</code>. If the sent message was not a
request, returns <code>None</code> immediately without waiting.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Application.wait_for_ready" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">wait_for_ready</span>


<a href="#diameter.node.application.Application.wait_for_ready" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">wait_for_ready</span><span class="p">(</span><span class="n">timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Wait for application connectivity to become ready.</p>
<p>Waits until at least one of the peers specified for the application has
completed its CER/CEA procedure and become ready to accept requests. If
all the configured peers for the application become again disconnected,
<code>wait_for_ready</code> will block again, until at least one of the peers has
returned and completed their CER/CEA.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method can be called every time before <code>send_request</code> is to be
used, for increased certainty that a request will go through,
however it will not guarantee that a peer will not go offline
between calling this method and sending the request.</p>
</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Amount of time to wait, in seconds</p>
              </div>
            </td>
            <td>
                  <code>30</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.application.ApplicationError" href="#diameter.node.application.ApplicationError">ApplicationError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no peer becomes available before timeout</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.ApplicationError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ApplicationError</span>


<a href="#diameter.node.application.ApplicationError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>Exception</code></p>


      <p>Base error class for all Application-raised errors.</p>


    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.EmptyAnswer" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">EmptyAnswer</span>


<a href="#diameter.node.application.EmptyAnswer" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="diameter.node.application.ApplicationError" href="#diameter.node.application.ApplicationError">ApplicationError</a></code></p>


      <p>An error received when a diameter peer fails to respond.</p>


    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.Message" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Message</span>


<a href="#diameter.node.application.Message" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">Message</span><span class="p">(</span><span class="n">header</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message._base.MessageHeader" href="../message/#diameter.message.MessageHeader">MessageHeader</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">avps</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="diameter.message.avp.Avp" href="../avp/#diameter.message.avp.avp.Avp">Avp</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">


      <p>Base message class.</p>
<p>All implemented diameter commands extend this class.</p>
<p>The base message class is not intended to be used directly; its main
purpose is to provide the <a class="autorefs autorefs-internal" href="../message/#diameter.message.Message.from_bytes">Message.from_bytes</a>
class method, for parsing network-received bytes into Python diameter
command message instances.</p>




  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Message.code" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">code</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Message.code" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">code</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">0</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Diameter command code value.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Message.header" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">header</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Message.header" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">header</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message._base.MessageHeader" href="../message/#diameter.message.MessageHeader">MessageHeader</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message._base.Message.header" href="#diameter.node.application.Message.header">header</a></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message._base.MessageHeader" href="../message/#diameter.message.MessageHeader">MessageHeader</a></span><span class="p">()</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>A message header. Always exists, defaults to an empty header for 
new messages.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>length</code> property of the message header is zero for newly 
created messages and will not be set until the message is rendered
using the <a class="autorefs autorefs-internal" href="../message/#diameter.message.Message.as_bytes">as_bytes</a> method.</p>
</div>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Message.name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Message.name" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;Unknown&#39;</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>A human-readable diameter command code name, e.g. "Accounting-Request".</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Message.append_avp" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">append_avp</span>


<a href="#diameter.node.application.Message.append_avp" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">append_avp</span><span class="p">(</span><span class="n">avp</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.avp.Avp" href="../avp/#diameter.message.avp.avp.Avp">Avp</a></span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Add an AVP to the internal list of AVPs.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Message.as_bytes" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">as_bytes</span>


<a href="#diameter.node.application.Message.as_bytes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">as_bytes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">bytes</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Retrieve entire message as bytes.</p>
<p>Retrieving the message also builds each AVP it contains. Until this
point, the list of AVPs has not been built yet and the message header
length is still zero. The header length is updated every time
<code>as_bytes()</code> is called.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Message.find_avps" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">find_avps</span>


<a href="#diameter.node.application.Message.find_avps" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">find_avps</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="o">*</span><span class="n">code_and_vendor</span><span class="p">:</span> <span class="n">tuple</span><span class="p">[</span><span class="n">int</span><span class="p">,</span> <span class="n">int</span><span class="p">],</span> <span class="n">alt_list</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="diameter.message.avp.Avp" href="../avp/#diameter.message.avp.avp.Avp">Avp</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-3"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">list</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="diameter.message.avp.Avp" href="../avp/#diameter.message.avp.avp.Avp">Avp</a></span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Find specific AVPs in the message internal AVP tree.</p>
<p>If more than one <code>code_and_vendor</code> pair is given, the list is assumed
to be a chain of AVPs to follow. The returned list of AVPs will be the
AVPs found at the end of each chain.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>In an AVP structure such as:</p>
<div class="highlight"><pre><span></span><code>Multiple-Services-Credit-Control &lt;Code: 0x1c8, Flags: 0x40 (-M-), Length: 168&gt;
  Requested-Service-Unit &lt;Code: 0x1b5, Flags: 0x40 (-M-), Length: 0&gt;
  Used-Service-Unit &lt;Code: 0x1be, Flags: 0x40 (-M-), Length: 84&gt;
    CC-Time &lt;Code: 0x1a4, Flags: 0x40 (-M-), Length: 12, Val: 9&gt;
    CC-Total-Octets &lt;Code: 0x1a5, Flags: 0x40 (-M-), Length: 16, Val: 0&gt;
</code></pre></div>
<p>The "CC-Total-Octets" AVP can be found with:</p>
    <div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">()</span>
</span><span id="__span-0-2"><span class="gp">&gt;&gt;&gt; </span><span class="n">avp</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">find_avps</span><span class="p">(</span>
</span><span id="__span-0-3"><span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="n">AVP_MULTIPLE_SERVICES_CREDIT_CONTROL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-0-4"><span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="n">AVP_USED_SERVICE_UNIT</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-0-5"><span class="gp">&gt;&gt;&gt; </span>    <span class="p">(</span><span class="n">AVP_CC_TOTAL_OCTETS</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="__span-0-6"><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">avp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-0-7"><span class="go">CC-Total-Octets &lt;Code: 0x1a5, Flags: 0x40 (-M-), Length: 16, Val: 0&gt;</span>
</span></code></pre></div>
    <p>The search is cached internally, repeating the same find operation will
return a cached result.</p>
      <div class="admonition note">
<p class="admonition-title">Note</p>
<p>Searching for AVPs can be somewhat resource intensive,
especially for larger command structures. For messages constructed from
received network bytes, it is much cheaper to simply access the values
of the message attributes directly. E.g. the example above is the same
as:</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="gp">&gt;&gt;&gt; </span><span class="n">avp</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">multiple_services_credit_control</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">used_service_unit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cc_total_octets</span>
</span><span id="__span-0-2"><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">avp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-0-3"><span class="go">0</span>
</span></code></pre></div>
</div>
<p>The method can also be used to search any arbitrary AVP list, by passing
an optional keyword argument <code>alt_avps</code>.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Message.from_bytes" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">from_bytes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#diameter.node.application.Message.from_bytes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">from_bytes</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">msg_data</span><span class="p">:</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">plain_msg</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-0-3"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="diameter.message._base._AnyMessageType">_AnyMessageType</span></span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Generate a new Message from network received bytes.</p>
<p>Accepts a byte string containing received network data and constructs a
new <code>Message</code> instance, returning one of its subclasses, if the command
code is a known one.</p>
<p>If possible, the returned insance is one of the specific subclasses,
e.g. <code>CreditControlRequest</code> or <code>CapabilitiesExchangeRequest</code>, which
attempt to be as smart as possible and offer direct access to AVPs as
class attributes, i.e. <code>CreditControlRequest.session_id</code>. If this is
not wanted, the additional keyword argument <code>plain_msg</code> can be set to
True, which returns just an instance of <code>Message</code> that holds the list
of parsed AVPs and does nothing else.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="c1"># construct a specific Message with parsed attributes</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">ccr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Message</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">ccr</span><span class="o">.</span><span class="n">session_id</span>
<span class="n">labocs1</span><span class="o">.</span><span class="n">gy</span><span class="p">;</span><span class="mi">379</span><span class="p">;</span><span class="mi">3434872354</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="c1"># construct a plain message with no attribute access</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Message</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">plain_msg</span><span class="o">=</span><span class="n">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="c1"># does not work</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">msg</span><span class="o">.</span><span class="n">session_id</span>
<span class="n">AttributeError</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;CreditControl&#39;</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="s1">&#39;session_id&#39;</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="c1"># this will work</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">session_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">msg</span><span class="o">.</span><span class="n">find_avps</span><span class="p">((</span><span class="n">AVP_SESSION_ID</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">session_id</span><span class="o">.</span><span class="n">value</span>
<span class="n">labocs1</span><span class="o">.</span><span class="n">gy</span><span class="p">;</span><span class="mi">379</span><span class="p">;</span><span class="mi">3434872354</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Message.to_answer" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">to_answer</span>


<a href="#diameter.node.application.Message.to_answer" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">to_answer</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="diameter.message._base._AnyMessageType">_AnyMessageType</span></span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Produce answer from a request.</p>
<p>Copies the request message header to a new answer message, clearing all
the flags except the proxyable bit. Attempts to by determine if a
suitable python Answer class exists, if not, uses the base class and
returns a new instance with the copied header.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Message.type_factory" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">type_factory</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#diameter.node.application.Message.type_factory" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">type_factory</span><span class="p">(</span><span class="n">header</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message._base.MessageHeader" href="../message/#diameter.message.MessageHeader">MessageHeader</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.Type">Type</span></span><span class="p">[</span><span class="n"><span title="diameter.message._base._AnyMessageType">_AnyMessageType</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Generate a type that should be used to create new instances.</p>
<p>This method is called internally by
<a class="autorefs autorefs-internal" href="../message/#diameter.message.Message.from_bytes">Message.from_bytes</a> and it can
be overridden by inheriting classes to indicate the specific type of
message class to generate, e.g. in order to produce different types
for "Request" and "Answer" messages, based on the given header.</p>
<p>If no type is returned, the base class type will be used.</p>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.Node" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Node</span>


<a href="#diameter.node.application.Node" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">Node</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">origin_host</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">realm_name</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span>
</span><span id="__span-0-4">    <span class="n">ip_addresses</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-5">    <span class="n">tcp_port</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-6">    <span class="n">sctp_port</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-7">    <span class="n">vendor_ids</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-8"><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">


      <p>A diameter node.</p>
<p>A single diameter node represents the local peer. It handles connections
to other peers, exchanging capabilities-exchange, device-watchdog and
disconnect-peer requests and answers on its own.</p>
<p>The node can act either as a server or as a client. In both cases it will
handle both incoming and outgoing requests, however when acting as a client,
other diameter nodes cannot connect to it, all connections must be
initiated and managed by the client. When acting as a server, connections
can be established by any party.</p>
<p>The node supports both TCP and SCTP transport modes. When acting as a
server, it can always listen on multiple addresses, however this is only
useful when utilising SCTP, as other peers will only connect to a single
TCP address at a time.</p>
<p>The node can connect to multiple peers simultaneously; peers can be added
using <a class="autorefs autorefs-internal" href="../node/#diameter.node.node.Node.add_peer"><code>Node.add_peer</code></a>. Both TCP and SCTP
transport modes are accepted and can be mixed at will. Peers can be flagged
as persistent, in which case the Node will periodically attempt to
reconnect, if a connection is lost.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nt">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">Node</span><span class="o">()</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nt">node</span><span class="p">.</span><span class="nc">add_peer</span><span class="o">(</span><span class="s2">&quot;aaa://dra1.gy:3868;transport=tcp&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;realm.net&quot;</span><span class="o">,</span><span class="w"> </span><span class="cp">[</span><span class="s2">&quot;10.16.17.5&quot;</span><span class="cp">]</span><span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nt">node</span><span class="p">.</span><span class="nc">add_peer</span><span class="o">(</span><span class="s2">&quot;aaa://dra2.gy;transport=sctp&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;realm.net&quot;</span><span class="o">,</span><span class="w"> </span><span class="cp">[</span><span class="s2">&quot;10.16.17.6&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;172.16.0.6&quot;</span><span class="cp">]</span><span class="o">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nt">node</span><span class="p">.</span><span class="nc">start</span><span class="o">()</span>
</code></pre></div>
<p>Any other message than CER/CEA, DWR/DWA and DPR/DPA will be routed to a
diameter application that is expected to do the actual work. Applications
can be created by subclassing either <a class="autorefs autorefs-internal" href="#diameter.node.application.Application">diameter.node.application.Application</a>
or <a class="autorefs autorefs-internal" href="#diameter.node.application.ThreadingApplication">diameter.node.application.ThreadingApplication</a> and adding them to
this node using <a class="autorefs autorefs-internal" href="../node/#diameter.node.node.Node.add_application">add_application</a>. If
a message is received that is intended for an application that does not
exist, a diameter error is returned to the peer.</p>
<p>Outgoing requests are routed based on realm and peer routing tables; if
a request does not contain the Destination-Host AVP, the request is
forwarded to a peer that has a matching realm and application ID set. If
multiple peers are available, a rudimentary load balancing based on least
used connections is used. Answers are routed back to the peer that they
originated from, or dropped if the peer has gone away.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>origin_host</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Our local node FQDN, must include the realm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>realm_name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Realm FQDN</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ip_addresses</code></td>
            <td>
                  <code>list[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional list of IP address that the node
will listen on for incoming requests. Must be set if the node
is to act as a server. When not set, the node will not
listen for any incoming connection attempts.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>tcp_port</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional TCP listen port, should be set if
<code>ip_addresses</code> is set, defaults to 3868 if nothing is given</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sctp_port</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional SCTP listen port, should be set if
<code>ip_addresses</code> is set, defaults to 3868 if nothing is given</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>vendor_ids</code></td>
            <td>
                  <code>list[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of supported vendor IDs. If not set, will default
to all known vendor IDs. The list of vendor IDs is only used
in advertising the node's capabilities in  CER/CEA</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>




  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.applications" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">applications</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.applications" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">applications</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="diameter.node.application.Application" href="#diameter.node.application.Application">Application</a></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>List of configured applications.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.cea_timeout" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">cea_timeout</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.cea_timeout" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">cea_timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">4</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Default timeout waiting for a CEA after sending a CER, in seconds.
Will be used if no specific timeout value has been configured for a 
peer.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.cer_timeout" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">cer_timeout</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.cer_timeout" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">cer_timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">4</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Default timeout waiting for a CER after receiving a connection 
attempt, in seconds. Will be used if no specific timeout value has been 
configured for a peer</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.connections" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">connections</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.connections" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">connections</span><span class="p">:</span> <span class="n">dict</span><span class="p">[</span><span class="n">str</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Currently handled peer connections.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.dwa_timeout" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">dwa_timeout</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.dwa_timeout" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">dwa_timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">4</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Default timeout waiting for a DWA after sending a DWR, in seconds. 
Will be used if no specific timeout value has been configured for a 
peer.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.end_to_end_seq" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">end_to_end_seq</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.end_to_end_seq" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">end_to_end_seq</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node._helpers.SequenceGenerator" href="../utilities/#diameter.node.SequenceGenerator">SequenceGenerator</a></span><span class="p">(</span><span class="n"><span title="self.state_id">state_id</span></span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>An end-to-end identifier generator. The next identifier can be 
retrieved with <code>Node.end_to_end_seq.next_sequence()</code>.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.idle_timeout" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">idle_timeout</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.idle_timeout" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">idle_timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">30</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Default time spent idle before a DWR is triggered, in seconds. 
Will be used if no specific timeout value has been configured for a 
peer.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.peer_sockets" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">peer_sockets</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.peer_sockets" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">peer_sockets</span><span class="p">:</span> <span class="n">dict</span><span class="p">[</span><span class="n">str</span><span class="p">,</span> <span class="n"><span title="socket.socket">socket</span></span> <span class="o">|</span> <span class="n"><span title="sctp.sctpsocket">sctpsocket</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Currently held sockets, one for each peer connection.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.peers" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">peers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.peers" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">peers</span><span class="p">:</span> <span class="n">dict</span><span class="p">[</span><span class="n">str</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.Peer" href="../peer/#diameter.node.peer.Peer">Peer</a></span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>All currently known peers as a dictionary of host identities as 
keys and instances of <code>Peer</code> as values..</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.peers_logging" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">peers_logging</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.peers_logging" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">peers_logging</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>If enabled, will dump a JSON representation of each peer
configuration and their current connection status, at every
<code>wakeup_interval</code> seconds. The logging will be done through
"diameter.stats" log facility an can also be silenced by changing the
log level to anything above DEBUG.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.product_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">product_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.product_name" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">product_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;python-diameter&#39;</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Our product name.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.retransmit_queue_size" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">retransmit_queue_size</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.retransmit_queue_size" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">retransmit_queue_size</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">10240</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>The amount of request end-to-end identifiers to "remember" after 
sending an answer. The list of remembered identifiers is checked every 
time a request with the "T" flag is received. The request will be 
rejected if a matching end-to-end identifier is still present in the 
queue. The size of this should match roughly with the amount of 
requests that are expected to arrive within a time period that
retransmits may arrive. There is no noticeable performance loss when
setting this higher than the default value of <code>10240</code>.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.session_generator" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">session_generator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.session_generator" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">session_generator</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node._helpers.SessionGenerator" href="../utilities/#diameter.node.SessionGenerator">SessionGenerator</a></span><span class="p">(</span><span class="n"><span title="self.origin_host">origin_host</span></span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>A unique diameter session ID generator. The next unique session 
ID can be retrieved <code>Node.session_generator.next_id()</code>.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.socket_peers" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">socket_peers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.socket_peers" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">socket_peers</span><span class="p">:</span> <span class="n">dict</span><span class="p">[</span><span class="n">int</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Peer connection lookup based on socket fileno.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.statistics" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">statistics</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#diameter.node.application.Node.statistics" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">statistics</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.node.NodeStats" href="../node/#diameter.node.node.NodeStats">NodeStats</a></span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Calculated, cumulated and averaged statistics for the entire node.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.statistics_history" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">statistics_history</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.statistics_history" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">statistics_history</span><span class="p">:</span> <span class="n"><span title="collections.deque">deque</span></span><span class="p">[</span><span class="n">dict</span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="collections.deque">deque</span></span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">1440</span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>A list of node statistics snapshots, taken at one minute intervals
and kept for 24 hours. Each snapshot is a dictionary representation of
a <a class="autorefs autorefs-internal" href="../node/#diameter.node.node.NodeStats">NodeStats</a> instance.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.stats_logging" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">stats_logging</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.stats_logging" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">stats_logging</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>If enabled, will dump a JSON representation of the statistics for
each peer in the logs, at every <code>wakeup_interval</code> seconds. The
logging will be done through "diameter.stats" log facility an can
also be silenced by changing the log level to anything above DEBUG.
Enabling this may have a slight performance impact, as the main
thread will block while the statistics are being gathered.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.vendor_id" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">vendor_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.vendor_id" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">vendor_id</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">99999</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Our vendor ID. Defaults to "unknown".</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.Node.wakeup_interval" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">wakeup_interval</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#diameter.node.application.Node.wakeup_interval" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">wakeup_interval</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">6</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Time in seconds between forced wakeups while waiting for connection
sockets to become active. This timer value controls how often peer 
timers are checked, how often reconnects are attempted and how often 
statistics are dumped in the logfiles. </p>
<p>As this also defines the interval at which peer timers are checked, it 
is also the smallest possible value for a peer timer value. Setting 
this value very low will consume more CPU, setting it too high will 
make observing short timeouts impossible.</p>
<p>This value also defines how long a node will continue to run, after 
<code>stop</code> with <code>force</code> argument set to <code>True</code> is called.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.add_application" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_application</span>


<a href="#diameter.node.application.Node.add_application" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">add_application</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.application.Application" href="#diameter.node.application.Application">Application</a></span><span class="p">,</span> <span class="n">peers</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.Peer" href="../peer/#diameter.node.peer.Peer">Peer</a></span><span class="p">])</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Register an application with diameter node.</p>
<p>The added application will receive diameter requests that the node
receives, which an application-id message header value matching the
application's ID.</p>
<p>When added, the node calls the application's <code>start</code> method
immediately. The application is stopped when the node stops.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>app</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.application.Application" href="#diameter.node.application.Application">Application</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of a class that implements
<a class="autorefs autorefs-internal" href="#diameter.node.application.Application"><code>Application</code></a></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>peers</code></td>
            <td>
                  <code>list[<a class="autorefs autorefs-internal" title="diameter.node.peer.Peer" href="../peer/#diameter.node.peer.Peer">Peer</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of Peer instances that have been returned by
<a class="autorefs autorefs-internal" href="../node/#diameter.node.node.Node.add_peer"><code>Node.add_peer</code></a>. The given
list of peers will be used to determine how messages are to be
routed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.add_peer" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_peer</span>


<a href="#diameter.node.application.Node.add_peer" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">add_peer</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">peer_uri</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">realm_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-4">    <span class="n">ip_addresses</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-5">    <span class="n">is_persistent</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-6">    <span class="n">is_default</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-7"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.Peer" href="../peer/#diameter.node.peer.Peer">Peer</a></span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Add a known peer.</p>
<p>The node will only connect to known connections and (optionally) accept
requests from known connections only.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>peer_uri</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A diameter node's DiameterIdentity as a DiameterURI
string, i.e. "aaa://<fqdn>:<port>;transport=<transport>".
The URI must contain at least the scheme and FQDN;
the port and transport will default to 3868 and "TCP" if not
included</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>realm_name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Peer realm name. If not given, will be set to the
same realm as the node has been configured with</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ip_addresses</code></td>
            <td>
                  <code>list[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of IP addresses for the peer. If not given,
no outgoing connection attempt to the peer will be made. For
TCP, only the first IP of the list is used. For SCTP, a
connection will be established to every address</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_persistent</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Enable persistent connection to the peer. If enabled,
the node will automatically re-establish a connection to the
peer on startup and at connection loss</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_default</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set this peer as the default peer for the realm. Note
that multiple defaults is permitted. Setting multiple pers
as default will result in load balancing between the peers.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.peer.Peer" href="../peer/#diameter.node.peer.Peer">Peer</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the peer. The returned instance is the actual peer
instance, permitting configuration to be adjusted after node
has been started, by altering its attributes.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.close_connection_socket" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">close_connection_socket</span>


<a href="#diameter.node.application.Node.close_connection_socket" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">close_connection_socket</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">conn</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">disconnect_reason</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="n">DISCONNECT_REASON_UNKNOWN</span><span class="p">,</span>
</span><span id="__span-0-4"><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Shuts down connection socket and stops observing it forever.</p>
<p>If the corresponding peer has persistency enabled, the node will
automatically re-establish the connection after <code>Node.reconnect_timeout</code>
seconds.</p>
<p>Closing the peer socket will automatically call
<a class="autorefs autorefs-internal" href="../node/#diameter.node.node.Node.remove_peer_connection"><code>Node.remove_peer_connection</code></a>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>conn</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of a peer connection to disconnect</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>disconnect_reason</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reason for the connection being disconnected,
one of the <code>PEER_DISCONNECT_REASON_*</code> constant values</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.peer.DISCONNECT_REASON_UNKNOWN" href="../peer/#diameter.node.peer.DISCONNECT_REASON_UNKNOWN">DISCONNECT_REASON_UNKNOWN</a></code>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.remove_peer_connection" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">remove_peer_connection</span>


<a href="#diameter.node.application.Node.remove_peer_connection" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">remove_peer_connection</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">conn</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">disconnect_reason</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="n">DISCONNECT_REASON_UNKNOWN</span><span class="p">,</span>
</span><span id="__span-0-4"><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Removes a peer connection that is no longer connected.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method should not be called directly, unless it is absolutely
certain that the peer socket is no longer connected. The safer way
is to use <a class="autorefs autorefs-internal" href="../node/#diameter.node.node.Node.close_connection_socket"><code>Node.close_connection_socket</code></a>
instead, which will first close the socket and then remove the peer.</p>
</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>conn</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of peer connection to remove from the list of
active connections</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>disconnect_reason</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A reason for the connection being disconnected,
one of the <code>PEER_DISCONNECT_REASON_*</code> constant values.</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.peer.DISCONNECT_REASON_UNKNOWN" href="../peer/#diameter.node.peer.DISCONNECT_REASON_UNKNOWN">DISCONNECT_REASON_UNKNOWN</a></code>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.route_answer" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">route_answer</span>


<a href="#diameter.node.application.Node.route_answer" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">route_answer</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tuple</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Determine which peer should be used for sending an answer message.</p>
<p>Should always be used by an application before sending an answer.</p>
<p>Determines the proper peer to be used, by keeping track of which
requests have been sent, and always forwarding answers in reverse
direction to correct peer connections.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exact answer message to send</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>tuple[<a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a>, <a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple with an instance of a peer to route to, and the same
message as was passed to the method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.node.NotRoutable" href="../node/#diameter.node.node.NotRoutable">NotRoutable</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>when there is either no peer waiting for the answer,
or when the peer exists, but does not accept messages at the
time</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.route_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">route_request</span>


<a href="#diameter.node.application.Node.route_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">route_request</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">app</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.application.Application" href="#diameter.node.application.Application">Application</a></span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></span>
</span><span id="__span-0-3"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">tuple</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Determine which peer should be used for sending a request message.</p>
<p>Should always be used by an application before sending a request.</p>
<p>Determines the proper peer to be used for the particular message, by
comparing the configured peer list with what is currently connected
and ready to receive requests. If multiple connections are available, a
rudimentary load balancing is used, with least-used peer selected.</p>
<p>Sets the hop-by-hop identifier automatically based on the selected
peer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>app</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.application.Application" href="#diameter.node.application.Application">Application</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The application instance that wants to send a request</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exact message to send</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>tuple[<a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a>, <a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple with an instance of a peer to route to, and the same
message as was passed to the method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.node.NotRoutable" href="../node/#diameter.node.node.NotRoutable">NotRoutable</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>when there is either no connections configured for the
application, or if none of the configured connections is connected
or accepting requests at the time</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.send_message" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">send_message</span>


<a href="#diameter.node.application.Node.send_message" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">send_message</span><span class="p">(</span><span class="n">conn</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Manually send a message towards a peer.</p>
<p>Normally messages are sent through applications, but this method
permits manually sending messages towards known connections.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>conn</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.node.peer.PeerConnection" href="../peer/#diameter.node.peer.PeerConnection">PeerConnection</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of a peer connection to send the message to. The
connection must be in <code>PEER_READY</code> or <code>PEER_READY_WAITING_DWA</code>
state</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>message</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="diameter.message.commands.Message" href="../commands/other_commands/#diameter.message.commands.Message">Message</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A valid diameter message instance to send, can be either a
request or an answer.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.start" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">start</span>


<a href="#diameter.node.application.Node.start" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">start</span><span class="p">()</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Start the node.</p>
<p>This method must be called once after the peer has been created. At
startup, the node will create the local listening sockets, start its
work threads and connect to any connections that have persistent connections
enabled.</p>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.Node.stop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stop</span>


<a href="#diameter.node.application.Node.stop" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">stop</span><span class="p">(</span><span class="n">wait_timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">180</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Stop node.</p>
<p>Stopping the node will emit a <code>Disconnect-PeerConnection-Request</code> towards each
currently connected peer, with disonnect cause "REBOOTING".
The node will then wait until each peer has produced a
<code>Disconnect-PeerConnection-Answer</code>, and regardless of the answer's result code
or error status, the peer sockets are closed. Some diameter vendors
may also already close the socket from their end immediately, if no
messages are pending.</p>
<p>After all connections have disconnected, the node's own listening sockets
will close, and afterwards the active applications are shut down.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wait_timeout</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set a timeout for the DPR/DPA procedure to cpmplete.
This should be usually fairly high, as time must be given for
not only for the DPR/DPA messages to travel, but also for the
peer connections to empty their in- and out buffers and for
the applications to finish processing responses.</p>
              </div>
            </td>
            <td>
                  <code>180</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>force</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optionally skip DPR/DPA procedure and just force each
peer connection to close immediately, with a very short (5-10
seconds) wait period for their threads to join.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.RequestTimeout" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RequestTimeout</span>


<a href="#diameter.node.application.RequestTimeout" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="diameter.node.application.ApplicationError" href="#diameter.node.application.ApplicationError">ApplicationError</a></code></p>


      <p>An error received when no answer is received within a given timeout.</p>


    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.SimpleThreadingApplication" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">SimpleThreadingApplication</span>


<a href="#diameter.node.application.SimpleThreadingApplication" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">SimpleThreadingApplication</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">application_id</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">is_acct_application</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-4">    <span class="n">is_auth_application</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-5">    <span class="n">max_threads</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="__span-0-6">    <span class="n">request_handler</span><span class="p">:</span> <span class="n"><span title="typing.Callable">Callable</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-7"><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="diameter.node.application.ThreadingApplication" href="#diameter.node.application.ThreadingApplication">ThreadingApplication</a></code></p>


      <p>A diameter application that starts a thread for each request.</p>
<p>An alternative to the base threading application, that does not require
subclassing or overwriting. The implementing party should pass a callback
function in the <code>request_handler</code> argument. The application will call
the passed function for every received request in a separate thread,
passing an instance of the app itself and the message to handle as
arguments.</p>
<p>If the application acts as a client only and never expects any requests,
the callback function is optional.</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="kn">from</span> <span class="nn">diameter.node.application</span> <span class="kn">import</span> <span class="n">SimpleThreadingApplication</span>
</span><span id="__span-0-2"><span class="kn">from</span> <span class="nn">diameter.message</span> <span class="kn">import</span> <span class="n">constants</span>
</span><span id="__span-0-3">
</span><span id="__span-0-4"><span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">Application</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">):</span>
</span><span id="__span-0-5">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Got&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span id="__span-0-6">    <span class="n">answer</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">generate_answer</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="__span-0-7">    <span class="k">return</span> <span class="n">answer</span>
</span><span id="__span-0-8">
</span><span id="__span-0-9"><span class="n">app</span> <span class="o">=</span> <span class="n">SimpleThreadingApplication</span><span class="p">(</span>
</span><span id="__span-0-10">    <span class="n">constants</span><span class="o">.</span><span class="n">APP_DIAMETER_BASE_ACCOUNTING</span><span class="p">,</span>
</span><span id="__span-0-11">    <span class="n">is_acct_application</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-0-12">    <span class="n">request_handler</span><span class="o">=</span><span class="n">handle_request</span><span class="p">)</span>
</span></code></pre></div>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>application_id</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication application ID</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_acct_application</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag the application as an accounting app</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_auth_application</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag the application as an authorisation app</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>max_threads</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum threads to start simultaneously for processing
messages. When maximum thread count is reached, the application
does not handle any further messages, until at least one of the
already started threads has exited. If set to 0, the amount of
threads to spawn is unlimited.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>request_handler</code></td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any callable that will be called whenever a
request is received. It will receive an instance of the app and
request message as its arguments and is expected to return an
answer message</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>




  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.StoppableThread" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">StoppableThread</span>


<a href="#diameter.node.application.StoppableThread" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">StoppableThread</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">target</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-4">    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-5">    <span class="n">args</span><span class="o">=</span><span class="p">(),</span>
</span><span id="__span-0-6">    <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-7">    <span class="o">*</span><span class="p">,</span>
</span><span id="__span-0-8">    <span class="n">daemon</span><span class="o">=</span><span class="kc">None</span>
</span><span id="__span-0-9"><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="threading.Thread">Thread</span></code></p>


      <p>A thread that can be stopped gracefully</p>
<p>Thread class with a stop() method. The thread itself has to check
regularly for the <code>self.is_stopped</code> condition within the <code>run()</code> method and
break its main loop gracefully once the condition is set.</p>
<p>Alternatively, if <code>run()</code> has not been overridden, and the traditional
<code>target=</code> approach is used instead, the targeted method will receive an
additional keyword argument, called <code>_thread</code> that points to the thread
itself, also containing the <code>is_stopped</code> attribute that can be checked.</p>




  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="diameter.node.application.StoppableThread.is_stopped" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_stopped</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#diameter.node.application.StoppableThread.is_stopped" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">is_stopped</span><span class="p">:</span> <span class="n">bool</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Check if the thread is stopped.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.StoppableThread.stop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stop</span>


<a href="#diameter.node.application.StoppableThread.stop" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">stop</span><span class="p">()</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Tell the thread to stop.</p>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="diameter.node.application.ThreadingApplication" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ThreadingApplication</span>


<a href="#diameter.node.application.ThreadingApplication" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">ThreadingApplication</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">application_id</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-3">    <span class="n">is_acct_application</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-4">    <span class="n">is_auth_application</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-0-5">    <span class="n">max_threads</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="__span-0-6"><span class="p">)</span>
</span></code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="diameter.node.application.Application" href="#diameter.node.application.Application">Application</a></code></p>


      <p>A diameter application that starts a thread for each request.</p>
<p>An alternative to the base application, where each message received by the
diameter node is handled in a separate thread. The implementing party
should override the <code>handle_request</code> method and do the message processing
work within, returning a new answer.</p>



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>application_id</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Authentication application ID</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_acct_application</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag the application as an accounting app</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>is_auth_application</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag the application as an authorisation app</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>max_threads</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum threads to start simultaneously for processing
messages. When maximum thread count is reached, the application
does not handle any further messages, until at least one of the
already started threads has exited. If set to 0, the amount of
threads to spawn is unlimited.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>




  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="diameter.node.application.ThreadingApplication.handle_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">handle_request</span>


<a href="#diameter.node.application.ThreadingApplication.handle_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">handle_request</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="diameter.message.Message" href="../message/#diameter.message.Message">Message</a></span> <span class="o">|</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

      <p>Called by diameter node every time a request message is received.</p>
<p>Unlike the base <code>Application</code> version of this same method, the
<code>handle_request</code> is expected to return an answer, either <code>None</code> or a
valid diameter Message. The return value of the method is sent
automatically back towards the network. Any exceptions raised by the
method are caught and result in a DIAMETER_UNABLE_TO_COMPLY result
being returned to the network.</p>

    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "toc.integrate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>